Introduction to Git
===================

# 1 Basic workflow

## 1.1 Version control

* **Version control system** : a tool manages changes made to the files and directories in a project

* **Git** :

    * Nothing that is saved to Git is ever lost, so you can always go back to see which results were generated by which versions of your programs.

    * Git automatically notifies you when your work conflicts with someone else's, so it's harder (but not impossible) to accidentally overwrite work.

    * Git can synchronize work done by different people on different machines, so it scales as your team does.

## 1.2 Where does Git store information?

* **Git project has two parts, called a repository**

	* The files and directories that you create and edit directly
	* The extra information that Git records about the project's history.
		* Git stores in a directory called `.git` located in the root directory of the repository
		* Git expects this information to be laid out in a very precise way, so you should never edit or delete anything in `.git`.

* **Check the state of a repository**

	* `git status`: displays a list of the files that have been modified since the last time changes were saved

## 1.3 How can I tell what I have changed?

* **Staging area**
	* It stores files with changes you want to save that haven't been saved yet
	* You can add more things to the staging area, but once commited you can't make further changes
	* `git status`: show you which files are in this staging area, and which files have changes that haven't yet been put there.

* **What is in a diff**
	* A diff is a formatted display of the differences between two sets of files.
	* `git diff`: show you all the changes in your repository
	* `git diff directory`: show you the changes to the files in some directory

* **Commit changes to a Git repository in two steps:**
	* Add one or more files to the staging area: `git add report.txt`
	* Commit everything in the staging area

```
$ cd dental
$ git add report.txt
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        modified:   report.txt
```

* **Compare the state of your files with those in the staging area**

	* `git diff -r HEAD`
		* `-r` flag: compare to a particular revision
		* `HEAD`: a shortcut meaning "the most recent commit"

	* `git diff -r HEAD path/to/file`

* **Commit changes**

	* `git commit`: save the changes in the staging area
		* open a text editor
		* The lines starting with `#` are comments, and won't be saved
	* `git commit -m "Program appears to have become self-aware."`: You can enter a log message to serve the same purpose as a comment in a program
	* `git commit --amend -m "new message"`: If you accidentally mistype a commit message, you can change it using the --amend flag.

## 1.4 Interlude: how can I edit a file?

* `nano filename`: open filename for editing or create it if it doesn't already exist

	* Ctrl-K: delete a line
	* Ctrl-U: un-delete a line
	* Ctrl-O: save the file
	* Ctrl-X: exit the editor

## 1.5 View a repository's history

* `git log`: view the log of the project's history
	* `commit` line: display a unique ID for the commit called a hash
	* press the space bar to go down a page
	* press the `q` key to quit

* `git log path/to/file`: display only the changes made to the specific file

# 2. Repositories

## 2.1 How does Git store information?

* Git uses a three-level structure for storing information

	* **Commit**: contains metadata such as the author, the commit message, and the time the commit happened.
		* The most recent commit is at the bottom, underneath its parent commits.

	* **Tree**: tracks the names and locations in the repository when that commit happened.

	* **Blob**: contains a compressed snapshot of the contents of the file when the commit happened
		* blob is short for binary large object, which is a SQL database term for "may contain data of any kind"

## 2.2 What is a hash?

* Every commit to a repository has a unique identifier called a hash (since it is generated by running the changes through a pseudo-random number generator called a hash function). 

* This hash is normally written as a 40-character hexadecimal string like `7c35a3ce607a14953f070f0f83b5d74c2296ef93`, but most of the time, you only have to give Git the first 6 or 8 characters in order to identify the commit you mean.

* Hashes are what enable Git to share data efficiently between repositories. If two files are the same, their hashes are guaranteed to be the same. 

## 2.3 How can I view a specific commit?

* `git show` + first few characters of the commit's hash: `git show 0da2f7`

	* `git show HEAD`: refers to the most recent commit
	* `git show HEAD~1`: refers to the commit before the most recent one
	* `git show HEAD~2`: refers to the commit before that, and so on.

* `git annotate file`: show who made the last change to each line of a file and when
	* The first eight digits of the hash
	* The author
	* The time of the commit
	* The line number
	* The contents of the line

* `git diff ID1..ID2`: show the differences between the commits
	* `git diff abc123..def456`
	* `git diff HEAD~1..HEAD~3`

## 2.4 How do I add new files?

```
# show the files that are in your repository but aren't being tracked
$ git status
On branch masterUntracked files:
  (use "git add <file>..." to include in what will be committed)

        sources.txt

nothing added to commit but untracked files present (use "git add" to track)

# add the new file to the staging area
$ git add sources.txt

# save the staged files with the message
$ git commit -m "Starting to track data sources."
```
































